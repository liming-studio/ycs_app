{"version":3,"sources":["uni-app:///main.js","webpack:////Users/kongzi/code_person/ycs_app_v2/pages/ecard/add.vue?9306","webpack:////Users/kongzi/code_person/ycs_app_v2/pages/ecard/add.vue?91bd","webpack:////Users/kongzi/code_person/ycs_app_v2/pages/ecard/add.vue?b755","webpack:////Users/kongzi/code_person/ycs_app_v2/pages/ecard/add.vue?5a85","uni-app:///pages/ecard/add.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","showLoading","fileList1","fileList2","industry","show","list","selText","form","thumbnail","name","mobile","wechatcode","position","companyaddress","companycontent","companyname","industryid","wechat","rules","type","required","message","trigger","onLoad","methods","getIndustryList","url","res","confirmIndustry","deletePic","console","afterRead","lists","item","status","fileListLen","uploadFilePromise","filePath","submit","uni","add","method"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,YAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAgH;AAChH;AACuD;AACL;;;AAGlD;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAA;AAAkzB,CAAgB,iyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC4It0B;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;;MACAC;QACA;UACAC;UACAC;UACAC;UACAC;QACA;QACA;UACAH;UACAC;UACAC;UACAC;QACA;QACA;UACAH;UACAC;UACAC;UACAC;QACA;QACA;UACAH;UACAC;UACAC;UACAC;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBAAAC;gBAAA;cAAA;gBAAAC;gBACA;gBACA;gBACA;kBAAA;gBAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;IACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;QACA,2EACAC;UACAC;UACAb;QAAA,GACA;MACA;MACA;QACA;QACA;QACA;UACAa;UACAb;UACAK;QACA;QACAS;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBAAAV;kBAAAW;gBAAA;cAAA;gBAAAV;gBACA5B;gBACA;gBACA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAuC;MAAA;MACA;QACA;UACA9B;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;MACA;QACAsB;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBAAAC;kBAAAf;kBAAA3B;gBAAA;cAAA;gBAAA4B;gBACAY;gBACAA;kBACAb;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B","file":"pages/ecard/add.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/ecard/add.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add.vue?vue&type=template&id=ce626644&\"\nvar renderjs\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/ecard/add.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=template&id=ce626644&\"","var components\ntry {\n  components = {\n    uLoadingPage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loading-page/u-loading-page\" */ \"@/uni_modules/uview-ui/components/u-loading-page/u-loading-page.vue\"\n      )\n    },\n    uForm: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form/u-form\" */ \"@/uni_modules/uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form-item/u-form-item\" */ \"@/uni_modules/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uUpload: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-upload/u-upload\" */ \"@/uni_modules/uview-ui/components/u-upload/u-upload.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uPicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-picker/u-picker\" */ \"@/uni_modules/uview-ui/components/u-picker/u-picker.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.industry.show = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.industry.show = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"w-full relative p-16\">\n    <!-- loading -->\n    <u-loading-page :loading=\"showLoading\" />\n    <!-- content -->\n    <view v-if=\"!showLoading\">\n      <u-form\n        ref=\"uForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        labelPosition=\"left\"\n        labelWidth=\"120\"\n      >\n        <!-- 头像 -->\n        <u-form-item label=\"头像\" borderBottom prop=\"thumbnail\">\n          <view class=\"flex\">\n            <u-upload\n              :fileList=\"fileList1\"\n              @afterRead=\"afterRead\"\n              @delete=\"deletePic\"\n              name=\"1\"\n              multiple\n              width=\"50\"\n              height=\"50\"\n              :maxCount=\"1\"\n            />\n          </view>\n        </u-form-item>\n        <!-- 姓名 -->\n        <u-form-item label=\"姓名\" borderBottom prop=\"name\">\n          <u-input \n            v-model=\"form.name\" \n            border=\"none\" \n            placeholder=\"请填写姓名\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 联系方式 -->\n        <u-form-item label=\"对外联系号码\" borderBottom prop=\"mobile\">\n          <u-input \n            v-model=\"form.mobile\"\n            type=\"number\"\n            border=\"none\" \n            placeholder=\"请填写您的对外联系号码\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 微信号 -->\n        <u-form-item label=\"微信号\" borderBottom prop=\"wechatcode\">\n          <u-input \n            v-model=\"form.wechatcode\" \n            border=\"none\" \n            placeholder=\"请填写您的微信号\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 职位 -->\n        <u-form-item label=\"职位\" borderBottom prop=\"position\">\n          <u-input \n            v-model=\"form.position\" \n            border=\"none\" \n            placeholder=\"请填写职位\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 公司名称 -->\n        <u-form-item label=\"公司名称\" borderBottom prop=\"companyname\">\n          <u-input \n            v-model=\"form.companyname\" \n            border=\"none\" \n            placeholder=\"请填写公司名称\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 主营业务 -->\n        <u-form-item \n          label=\"主营业务\" \n          borderBottom \n          prop=\"industryid\" \n          @click=\"industry.show = true\"\n        >\n          <u-input\n            v-model=\"industry.selText\"\n            disabled\n            disabledColor=\"#ffffff\"\n            placeholder=\"请选择主营业务\"\n            border=\"none\"\n          />\n          <u-icon\n            slot=\"right\"\n            name=\"arrow-right\"\n          />\n        </u-form-item>\n        <!-- 公司地址 -->\n        <u-form-item label=\"公司地址\" borderBottom prop=\"companyaddress\">\n          <u-input \n            v-model=\"form.companyaddress\" \n            border=\"none\" \n            placeholder=\"请填写公司地址\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 公司简介 -->\n        <u-form-item label=\"公司简介\" borderBottom prop=\"companycontent\">\n          <u-input \n            v-model=\"form.companycontent\" \n            border=\"none\" \n            placeholder=\"请填写公司简介\"\n            clearable\n          />\n        </u-form-item>\n        <!-- 微信二维码 -->\n        <u-form-item label=\"上传微信二维码\" borderBottom prop=\"wechat\">\n          <view class=\"flex\">\n            <u-upload\n              :fileList=\"fileList2\"\n              @afterRead=\"afterRead\"\n              @delete=\"deletePic\"\n              name=\"2\"\n              multiple\n              :maxCount=\"1\"\n            />\n          </view>\n        </u-form-item>\n      </u-form>\n      <view class=\"mt-48\">\n        <u-button type=\"primary\" shape=\"circle\"  @click=\"submit\">提交</u-button>\n      </view>\n      <u-picker \n        :show=\"industry.show\" \n        :columns=\"industry.list\"\n        keyName=\"name\"\n        @cancel=\"industry.show = false\"\n        @confirm=\"confirmIndustry\"\n      />\n    </view>\n  </view>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        showLoading: true,\n        fileList1: [],    // 头像\n        fileList2: [],\n        industry: {\n          show: false,\n          list: [],\n          selText: ''\n        },\n        form: {\n          thumbnail: [],        // 头像\n          name: '',             // 姓名\n          mobile: '',           // 对外联系号码\n          wechatcode: '',       // 微信号\n          position: '',         // 职位\n          companyaddress: '',   // 公司地址\n          companycontent: '',   // 公司简介\n          companyname: '',      // 公司名称\n          industryid: '',       // 主营业务\n          wechat: [],           // 上传微信二维码\n        },\n        rules: {\n          'name': {\n            type: 'string',\n            required: true,\n            message: '请输入您的姓名',\n            trigger: ['blur', 'change']\n          },\n          'mobile': {\n            type: 'string',\n            required: true,\n            message: '请输入您的对外联系号码',\n            trigger: ['blur', 'change']\n          },\n          'companyname': {\n            type: 'string',\n            required: true,\n            message: '请输入公司名称',\n            trigger: ['blur', 'change']\n          },\n          'industryid': {\n            type: 'number',\n            required: true,\n            message: '请选择公司主营业务',\n            trigger: ['blur', 'change']\n          }\n        }\n      }\n    },\n    onLoad(options) {\n      this.getIndustryList()\n    },\n    methods: {\n      // 获取所有行业\n      async getIndustryList() {\n        const res = await this.$api({ url: '/open/industry/getList'})\n        if(res.data.code !== 20000) uni.$u.toast(res.data.msg)\n        if(res.data.code === 20000) this.industry.list = [res.data.data]\n        this.$nextTick(() => this.showLoading = false)\n        // setTimeout(() => this.showLoading = false, 100)\n      },\n      // 选择行业\n      confirmIndustry({value}) {\n        this.industry.selText = value[0].name\n        this.form.industryid = value[0].id\n        this.industry.show = false\n      },\n      // 删除图片\n      deletePic(event) {\n        console.log(event)\n        this[`fileList${event.name}`].splice(event.index, 1)\n        if(event.name === '1') this.form.thumbnail.splice(event.index, 1)\n        if(event.name === '2') this.form.wechat.splice(event.index, 1)\n      },\n      // 选择图片\n      afterRead(event) {\n        let lists = [].concat(event.file)\n        let fileListLen = this[`fileList${event.name}`].length\n        lists.map((item) => {\n          this[`fileList${event.name}`].push({\n            ...item,\n            status: 'uploading',\n            message: '上传中'\n          })\n        })\n        for (let i = 0; i < lists.length; i++) {\n          const result = this.uploadFilePromise(lists[i].url, event.name)\n          let item = this[`fileList${event.name}`][fileListLen]\n          this[`fileList${event.name}`].splice(fileListLen, 1, Object.assign(item, {\n            status: 'success',\n            message: '',\n            url: result\n          }))\n          fileListLen++\n        }\n      },\n      async uploadFilePromise(path, name) {\n        const res = await this.$upload({url: '/open/addpic', filePath: path})\n        let data = JSON.parse(res.data)\n        if(data.code !== 20000) uni.$u.toast(data.msg)\n        if(data.code === 20000) {\n          if(name === '1') this.form.thumbnail.push(data.data)\n          if(name === '2') this.form.wechat.push(data.data)\n        }\n      },\n      // 提交\n      submit() {\n        this.$refs.uForm.validate().then(res => {\n          this.add({            \n            thumbnail: JSON.stringify(this.form.thumbnail),      \n            name:  this.form.name,           \n            mobile: this.form.mobile,          \n            wechatcode: this.form.wechatcode,      \n            position: this.form.position,       \n            companyaddress: this.form.companyaddress,\n            companycontent: this.form.companycontent,\n            companyname: this.form.companyname,    \n            industryid: this.form.industryid,   \n            wechat: JSON.stringify(this.form.wechat),     \n          })\n        }).catch(errors => {\n          uni.$u.toast('填写信息不完整')\n        })\n      },\n      async add(data) {\n        const res = await this.$api({ method: 'POST', url: '/card/updateCard', data: data })\n        uni.$u.toast(res.data.msg)\n        uni.reLaunch({\n          url: '/pages/ecard/index'\n        })\n      }\n    },\n  }\n</script>"],"sourceRoot":""}